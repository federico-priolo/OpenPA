<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grafico a Torta con Chart.js</title>
</head>
<body>

<div style="width: 120%; margin: auto;">
    <canvas id="pieChart"></canvas>
</div>

<script>
    function loadLibraryIfNeeded() {
        // Verifica se uno script con l'ID unico esiste già
        if (!document.getElementById('uniqueLibraryScriptId')) {
            let script = document.createElement('script');
            script.src = '/openpa/easyui/chart.js';
            script.id = 'uniqueLibraryScriptId'; // Assegna un ID unico
            script.onload = initializeChart; // Quando la libreria è caricata, inizializza il grafico
            document.body.appendChild(script);
        } else {
            initializeChart(); // Se la libreria è già stata caricata, inizializza il grafico direttamente
        }
    }

    function initializeChart() {
        // Dati per il grafico
        var data = {
            labels: ['Rosso', 'Blu', 'Verde'],
            datasets: [{
                data: [30, 25, 45],
                backgroundColor: ['#FF6384', '#36A2EB', '#4CAF50']
            }]
        };

        // Configurazione del grafico
        var options = {
            responsive: true,
            maintainAspectRatio: false
        };

        // Otteniamo il riferimento al canvas
        var ctx = document.getElementById('pieChart').getContext('2d');

        // Crea il grafico a torta
        var pieChart = new Chart(ctx, {
            type: 'pie',
            data: data,
            options: options
        });
    }

    // Chiamare questa funzione per assicurarsi che la libreria venga caricata e inizializzare il grafico
    loadLibraryIfNeeded();

</script>
</body>
</html>
